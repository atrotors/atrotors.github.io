<!doctype html>
<html>
  <head>
    <title>Space!!!!!!!!!</title>
    <style>
    * {
      margin: 0;
      padding: 0;
    }

    body, html {
      height: 100%;
    }

    body {
      background-image: url('background.jpg');
      background-size: cover;
      background-position: bottom;
    }

    #space {
      position: absolute;
      width: 100%;
      height: 100%;
    }
    </style>

    <script type="text/javascript" src="paper-full.min.js"></script>
    <script type="text/paperscript" canvas="space">
      var destination, velocity, initialDistance;
      var velocityUnit = 0.0005;
      var astronaut = new Raster({
        source: 'astronaut.png',
        position: view.center,
      });

      function newDestination() {
        destination = Point.random() * view.size;
        velocity = velocityUnit;
        initialDistance = (destination - astronaut.position).length;
      }
      newDestination();

      function onFrame(event) {
        var vector = destination - astronaut.position;
        var distance = vector.length;

        if (distance < 20) {
          newDestination();
        }

        astronaut.position += (vector / distance * velocity);
        astronaut.rotate(velocity / 10);

        // first half speed up, second half slow down
        if (distance > initialDistance/2) {
          velocity += velocityUnit;
        } else {
          velocity -= velocityUnit;
        }
      }
    </script>
  </head>
  <body>
    <canvas id="space" resize></canvas>
  </body>
</html>
